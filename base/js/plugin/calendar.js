define("base/js/components/add_zero",[],function(require,exports,module){var a=function(a,t){for(var a=""+a;a.length<t;)a="0"+a;return a};module.exports=a}),define("base/js/components/days_in_month",[],function(require,exports,module){var a=function(a,t){return t=parseInt(t,10)+1,new Date(a,t,0).getDate()};module.exports=a}),define("base/js/components/date_time",[],function(require,exports,module){var a=function(){var a=new Date,t=a.getFullYear(),e=a.getMonth(),n=a.getDate(),s=a.getDay(),r=a.getHours(),i=a.getMinutes(),o=a.getSeconds();return{date:a,year:t,month:e,day:n,week:s,hour:r,minute:i,second:o}};module.exports=a}),define("base/js/plugin/calendar",["base/js/components/add_zero","base/js/components/days_in_month","base/js/components/date_time"],function(require,exports,module){var a=require("base/js/components/add_zero"),t=require("base/js/components/days_in_month"),e=require("base/js/components/date_time"),n=function(a,t){this.dom=a instanceof $?a:$(a),this.args=$.extend({prevMonth:"上月",nextMonth:"下月",prevYear:"上年",nextYear:"下年",weekData:["日","一","二","三","四","五","六"],selectedData:[],selectCurrentMonth:!0,showOn:!1,separation:"-",ableDay:[],callback:function(){},show:!1,isClick:!0,insert:!1,chooseYear:!0},t||{}),this.init()};n.prototype={init:function(){var a=this,t=e().year,n=e().month,s=e().day,r=!1;this.dom.on("click",function(e){e.stopPropagation(),r===!1&&(a.createCalendar(t,n,s),r=!0),a.showCalendar()}),this.args.show===!0&&this.dom.trigger("click")},buildDate:function(t,e,n){return 0===e&&(e=12,t-=1),13===e&&(e=1,t+=1),t+this.args.separation+a(e,2)+this.args.separation+a(n,2)},createCalendar:function(a,t,e){var n=this,s=$('<div class="calendar-wrap"></div>'),r=$('<div class="calendar-wrap-inner"></div>'),i=$('<div class="calendar-title"><a href="javascript:void(0)" class="calendar-prev-btn">'+this.args.prevMonth+'</a><a href="javascript:void(0)" class="calendar-next-btn">'+this.args.nextMonth+"</a></div>"),o=$('<div class="calendar-title"><a href="javascript:void(0)" class="calendar-prev-btn calendar-prev-btn-y">'+this.args.prevYear+'</a><a href="javascript:void(0)" class="calendar-next-btn calendar-next-btn-y">'+this.args.nextYear+"</a></div>"),d=$('<table width="100%"></table>'),c=$("<thead><tr></tr></thead>"),l=$("<tbody></tbody>");$.each(this.args.weekData,function(a,t){var e=$("<th></th>");0!=a&&6!=a||e.addClass("red"),e.html(t),c.find("tr").append(e)}),i.append('<span class="calendar-choose-year">'+a+'</span>年<span class="calendar-choose-month">'+(t+1)+"</span>月");for(var h=0;h<6;h++){for(var p=$("<tr></tr>"),f=0;f<7;f++){var u=$("<td><span></span></td>");0==f&&u.addClass("nobl"),p.append(u)}l.append(p)}r.append(i),this.args.chooseYear===!0&&r.append(o),d.append(c),d.append(l),r.append(d),s.append(r),this.args.insert===!0?n.dom.html(s):(s.css({position:"relative"}),r.css({position:"absolute",left:0}),s.insertAfter(n.dom)),this.calWrap=s,this.changeDate(a,t,e),i.find(".calendar-next-btn").on("click",function(s){s.stopPropagation(),t++,12==t&&(t=0,a+=1),n.changeDate(a,t,e)}),i.find(".calendar-prev-btn").on("click",function(s){s.stopPropagation(),t--,t==-1&&(t=11,a-=1),n.changeDate(a,t,e)}),o.find(".calendar-next-btn-y").on("click",function(s){s.stopPropagation(),a++,n.changeDate(a,t,e)}),o.find(".calendar-prev-btn-y").on("click",function(s){s.stopPropagation(),a--,n.changeDate(a,t,e)}),this.args.isClick===!0&&(l.on("click","td",function(){n.dom.val($(this).attr("date")),n.hideCalendar(),n.args.callback($(this).attr("date"))}),$(document).on("click.Calendar",function(){n.hideCalendar()}),s.on("click",function(a){a.stopPropagation()}))},selectedDate:function(t){for(var e=this.args.selectedData.length,n=t.attr("date").split(this.args.separation).join("-"),s=a($(".calendar-choose-month").attr("month"),2),r=0;r<e;r++)this.args.selectCurrentMonth===!0?this.args.selectedData[r]===n&&this.args.selectedData[r].split("-")[1]===s&&t.addClass("selected"):this.args.selectedData[r]===n&&t.addClass("selected")},changeDate:function(a,e,n){var s=this,r=new Date;r.setFullYear(a),r.setMonth(e),r.setDate(1);var i=new Date,o=i.getFullYear(),d=i.getMonth();this.calWrap.find(".calendar-choose-year").html(a).attr("year",a),this.calWrap.find(".calendar-choose-month").html(e+1).attr("month",e+1);var c=this.calWrap.find("td"),l=function(r){var i=0,l=t(a,e),h=t(a,e-1),p=r,f=(t(a,e+1),0);c.each(function(t){var c=$(this);c.removeClass("current-month-time"),c.removeClass("selected"),t<=r-1?(p--,c.find("span").html(h-p),c.attr("date",s.buildDate(a,e,h-p)),c.attr("title",s.buildDate(a,e,h-p))):t>l+r-1?(f++,c.find("span").html(f),c.attr("date",s.buildDate(a,e+2,f)),c.attr("title",s.buildDate(a,e+2,f))):(i++,c.addClass("current-month-time"),c.find("span").html(i),c.attr("date",s.buildDate(a,e+1,i)),c.attr("title",s.buildDate(a,e+1,i)),n===i&&o===a&&d===e&&s.args.showOn===!0&&c.addClass("on")),s.selectedDate(c)})};l(r.getDay())},hideCalendar:function(){this.calWrap.fadeOut()},showCalendar:function(){this.calWrap.fadeIn()}},module.exports=n});